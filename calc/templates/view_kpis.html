{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
      <link rel="stylesheet" href="{% static 'kpi/main.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>
<body>
    <div class="container">
        <div class="rasm">
            {% if photo_url %}
               <img style="width: 100%; height:100%" src="{{ photo_url }}" alt="Profile Picture">
            {% else %}
               <img src="{% static 'kpi/default_photo.jpg' %}" alt="Default Profile Picture">
            {% endif %}
        </div>
        <div class="info">
            {% if kpi_entries %}
                {% with kpi=kpi_entries.0 %}
            <h1 style="font-size: 60px;">{{ kpi.employee.name }}</h1>
            <div class="info_item">
                <span>ФИЛИАЛ /ГО</span>
                <span class="ikki">{{ kpi.employee.branch }}    </span>
            </div>
            <div class="info_item">
                <span>ВСП (ОПЕРУ/БХМ/БХО)</span>
                <span class="ikki">{{ kpi.employee.division }}</span>
            </div>
            <div class="info_item">
                <span>ПОДРАЗДЕЛЕНИЕ</span>
                <span class="ikki">{{ kpi.employee.department }}</span>
            </div>
            <div class="info_item">
                <span>ДОЛЖНОСТЬ</span>
                <span class="ikki">{{ kpi.employee.position }}</span>
            </div>
            <div class="info_item">
                <span>FUNCTIONAL</span>
                <span class="ikki">{{kpi.premium}}</span>
            </div>
            <div class="info_item">
                <span>ТАБЕЛЬНЫЙ НОМЕР РАБОТНИКА</span>
                 <span class="ikki">{{ kpi.employee.table_number }}</span>
            </div>
              {% endwith %}
          {% endif %}
    </div>
        <div class="diagram">
            <h1>KPI</h1>
            <p style="float: right; margin-top: -59px; font-size: 24px; font-weight: 900;">за июль 2023 г.            </p>
            <canvas id="myChart1" style="width:100%;max-width:600px;margin-top:-20px"></canvas>

<script>
const xValues = ["", ""];
const yValues = [78, 22];
const barColors = [
  "#008000",
  "#f2f2f2"
];

new Chart("myChart1", {
  type: "pie",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    title: {
      display: true,
      text: ""
    }
  }
});
</script>

        </div>
    </div>

    <nav class="chart1">
        <p style="font-style: italic; font-size: 30px; font-weight: 900;">Динамика выполнение общего плановые показателей KPI</p>
        <canvas id="myChart"></canvas>
    </nav>
<div class="umumiy">

  <div class="flex-container1">
    <div style="width: 99%;"></div>
          <div style="width: 30%;">НАЧАЛА</div>
          <div style="width: 22%;">КОНЕЦ</div>
       <div style="width: 25%;">АКТИВ <br>НОСТЬ</div>
          <div style="width: 25%;">МЕТОД <br> РАСЧОТА</div>
    <div style="width: 25%;" > ВЕС <br> ПОКАЗАТЕЛЬЯ  </div>
    <div style="width: 10%"> ПЛАН</div>
    <div style="width: 28%;">ФАКТ<br></div>
    <div style="width: 13%;">ИСПОЛ- <br>  НЕНИЕ <br></div>
  </div>


 {% for kpi in kpi_entries %}
    <div class="flex-container">
        <div id="title">{{ kpi.kpi_name }}</div>
        <div id="start">{{ kpi.employee.start }}</div>
        <div id="end">{{ kpi.employee.end }}</div>
          <div id="active">{{ kpi.activity }}</div>
          <div id="method">{{ kpi.method }}</div>
         <div id="pos">{{ kpi.weight }}</div>
     <!-- Update the lines where you display the numbers -->
<div id="plan">{{ kpi.performance_score|add:0.5|floatformat:"0" }}</div>
<div id="fact">{{ kpi.fact|add:0.5|floatformat:"0" }}</div>
<div id="done">{{ kpi.finished|add:0.5|floatformat:"0" }}</div>


    </div>
    {% endfor %}


</div>
<script>
  // Sample data for the chart
  var data = {
      labels: ["January", "February", "March", "April", "May","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],
      datasets: [{
          label: "",
          data: [10, 20, 15,12,14,16,18,22,24,26,28, 25, 30],
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 2,
          fill: false
      }]
  };

  // Chart configuration
  var options = {
      maintainAspectRatio: false, // Set to false to adjust the aspect ratio
      aspectRatio: 0.9, // Adjust the height of the chart
      responsive: true
  };

  // Get the context of the canvas element
  var ctx = document.getElementById('myChart').getContext('2d');

  // Create the chart
  var myChart = new Chart(ctx, {
      type: 'line',
      data: data,
      options: options
  });
</script>
</body>
</html>

<!--{% load static %}-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>KPI View</title>-->
<!--    <link rel="stylesheet" href="{% static 'kpi/main.css' %}">-->
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>-->
<!--    <style>-->
<!--        /* Additional styles can be added here */-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <div class="rasm">-->
<!--            &lt;!&ndash; Your image or content goes here &ndash;&gt;-->
<!--        </div>-->
<!--        <div class="info">-->
<!--            {% if kpi_entries %}-->
<!--                {% with kpi=kpi_entries.0 %}-->
<!--                    <h1>{{ kpi.employee.name }}</h1>-->
<!--                    <div class="info_item">-->
<!--                        <span>ФИЛИАЛ / ГО</span>-->
<!--                        <span class="ikki">{{ kpi.employee.branch }}</span>-->
<!--                    </div>-->
<!--                    <div class="info_item">-->
<!--                        <span>ВСП (ОПЕРУ/БХМ/БХО)</span>-->
<!--                        <span class="ikki">{{ kpi.employee.division }}</span>-->
<!--                    </div>-->
<!--                    <div class="info_item">-->
<!--                        <span>ПОДРАЗДЕЛЕНИЕ</span>-->
<!--                        <span class="ikki">{{ kpi.employee.department }}</span>-->
<!--                    </div>-->
<!--                    <div class="info_item">-->
<!--                        <span>ДОЛЖНОСТЬ</span>-->
<!--                        <span class="ikki">{{ kpi.employee.position }}</span>-->
<!--                    </div>-->
<!--                    <div class="info_item">-->
<!--                        <span>FUNCTIONAL</span>-->
<!--                        <span class="ikki">{{ kpi.premium }}</span>-->
<!--                    </div>-->
<!--                    <div class="info_item">-->
<!--                        <span>ТАБЕЛЬНЫЙ НОМЕР РАБОТНИКА</span>-->
<!--                        <span class="ikki">{{ kpi.employee.table_number }}</span>-->
<!--                    </div>-->
<!--                    <div class="info_item">-->
<!--                        <span>ОКЛАД РАБОТНИКА, СУМ</span>-->
<!--                        <span class="ikki">{{ kpi.employee.salary }}</span>-->
<!--                    </div>-->
<!--                {% endwith %}-->
<!--            {% endif %}-->
<!--        </div>-->
<!--        <div class="diagram">-->
<!--            <h1>KPI</h1>-->
<!--            <p style="float: right; padding-top: 1px; font-size: 29px; font-weight: 900;">за июль 2023 г.</p>-->
<!--            <canvas id="myChart1" style="width:100%;max-width:600px"></canvas>-->
<!--        </div>-->
<!--    </div>-->

<!--    <nav class="chart1">-->
<!--        <p style="font-style: italic; font-size: 30px; font-weight: 500;">Динамика выполнение общего плановые показателей KPI</p>-->
<!--        <canvas id="myChart"></canvas>-->
<!--    </nav>-->

<!--    <div class="umumiy">-->
<!--        <div class="flex-container1">-->
<!--            <div style="width: 70%;"></div>-->
<!--            <div style="width: 15%;">АКТИВНОСТЬ</div>-->
<!--            <div style="width: 15%;">МЕТОД РАСЧЕТА</div>-->
<!--            <div style="width: 23%;"><br>ПЛАН</div>-->
<!--            <div><br>ФАКТ</div>-->
<!--            <div style="width: 12%;">ИСПОЛНЕНИЕ</div>-->
<!--            <div style="width: 21.5%;">СТАВКА ПРЕМИРОВАНИЯ, СУМ</div>-->
<!--            <div style="width: 21.5%;">СУММА ПРЕМИРОВАНИЯ, СУМ</div>-->
<!--        </div>-->

<!--        {% for kpi in kpi_entries %}-->
<!--            <div class="flex-container">-->
<!--                <div id="title">{{ kpi.kpi_name }}</div>-->
<!--                <div id="title">{{ kpi.activity }}</div>-->
<!--                <div id="title">{{ kpi.method }}</div>-->
<!--                <div id="plan">{{ kpi.performance_score }}</div>-->
<!--                <div id="fact">{{ kpi.fact }}</div>-->
<!--                <div id="done">{{ kpi.finished }}</div>-->
<!--                <div id="pos">{{ kpi.weight }}</div>-->
<!--                <div id="prem">{{ kpi.overall|default:"0"|floatformat:"2" }}%</div>-->
<!--            </div>-->
<!--        {% endfor %}-->
<!--    </div>-->

<!--    <script>-->
<!--        // Sample data for the chart-->
<!--        var data = {-->
<!--            labels: ["January", "February", "March", "April", "May", "июнь", "июль", "август", "сентябрь", "октябрь", "ноябрь", "декабрь"],-->
<!--            datasets: [{-->
<!--                label: "",-->
<!--                data: [10, 20, 15, 12, 14, 16, 18, 22, 24, 26, 28, 25, 30],-->
<!--                borderColor: 'rgba(75, 192, 192, 1)',-->
<!--                borderWidth: 2,-->
<!--                fill: false-->
<!--            }]-->
<!--        };-->

<!--        // Chart configuration-->
<!--        var options = {-->
<!--            maintainAspectRatio: false, // Set to false to adjust the aspect ratio-->
<!--            aspectRatio: 0.9, // Adjust the height of the chart-->
<!--            responsive: true-->
<!--        };-->

<!--        // Get the context of the canvas element-->
<!--        var ctx = document.getElementById('myChart').getContext('2d');-->

<!--        // Create the chart-->
<!--        var myChart = new Chart(ctx, {-->
<!--            type: 'line',-->
<!--            data: data,-->
<!--            options: options-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->
